# Trading Journal - 文档总览

> 最后更新: 2026年2月6日

欢迎来到Trading Journal项目文档中心！这里包含了项目的完整技术文档和使用指南。

---

## 📚 文档目录

### 1️⃣ [项目概览](./01_项目概览.md)
**适合**: 新用户、产品经理、投资者

**内容**:
- 项目简介和核心价值主张
- 技术架构概览
- 核心功能模块介绍
- 数据模型概述
- 未来规划路线图

**阅读时间**: 15分钟

---

### 2️⃣ [技术路径](./02_技术路径.md)
**适合**: 开发者、技术负责人

**内容**:
- 前端技术栈详解（React, TypeScript, Vite, Tailwind）
- 后端架构设计（Supabase, Vercel Serverless）
- 数据流设计
- API集成方案
- 状态管理策略
- 性能优化技巧

**阅读时间**: 25分钟

---

### 3️⃣ [核心算法](./03_核心算法.md)
**适合**: 量化交易者、算法工程师、高级用户

**内容**:
- OSS评分系统详解
- LOQ算法（买方评分）
  - Lambda（杠杆率）
  - Gamma Efficiency（爆发力）
  - Theta Burn（时间衰减）
  - Delta Bonus（ATM奖励）
- CSQ算法（卖方评分）
- IV期限结构分析（4-Card Method）
- 警告系统算法
- P&L计算算法

**阅读时间**: 30分钟

---

### 4️⃣ [数据库设计](./04_数据库设计.md)
**适合**: 后端开发者、数据库管理员

**内容**:
- PostgreSQL表结构设计
  - positions（持仓表）
  - transactions（交易记录表）
  - greeks_history（Greeks历史表）
- 关系设计和ER图
- 索引策略
- Row Level Security (RLS)
- 迁移历史
- 常用查询示例

**阅读时间**: 20分钟

---

### 5️⃣ [API文档](./05_API文档.md)
**适合**: 前端开发者、API集成者

**内容**:
- 期权价格API详解
  - 端点、参数、响应格式
  - OCC Symbol生成算法
  - 价格计算逻辑
- Supabase REST API使用
- 错误处理和重试机制
- 安全性和CORS配置
- 测试方法

**阅读时间**: 20分钟

---

### 6️⃣ [用户工作流](./06_用户工作流.md)
**适合**: 所有用户、交易者

**内容**:
- 日常交易流程（开盘前、盘中、收盘后）
- Scanner使用指南
- Watchlist管理
- 持仓管理
- 风险管理策略
- 最佳实践和常见错误
- 成功案例分析

**阅读时间**: 25分钟

---

## 🚀 快速开始

### 新用户
1. 阅读 [项目概览](./01_项目概览.md) 了解项目
2. 阅读 [用户工作流](./06_用户工作流.md) 学习使用
3. 开始交易！

### 开发者
1. 阅读 [项目概览](./01_项目概览.md) 了解架构
2. 阅读 [技术路径](./02_技术路径.md) 了解技术栈
3. 阅读 [数据库设计](./04_数据库设计.md) 了解数据模型
4. 阅读 [API文档](./05_API文档.md) 开始集成

### 量化交易者
1. 阅读 [核心算法](./03_核心算法.md) 了解评分系统
2. 阅读 [用户工作流](./06_用户工作流.md) 学习应用
3. 根据算法优化交易策略

---

## 📖 文档结构

```
docs/
├── README.md                 # 本文件（文档索引）
├── 01_项目概览.md            # 项目简介和架构
├── 02_技术路径.md            # 技术栈和实现细节
├── 03_核心算法.md            # 评分算法详解
├── 04_数据库设计.md          # 数据模型和SQL
├── 05_API文档.md             # API接口文档
└── 06_用户工作流.md          # 使用指南和最佳实践
```

---

## 🔍 按主题查找

### 架构和设计
- [技术架构概览](./01_项目概览.md#技术架构概览)
- [前端技术栈](./02_技术路径.md#前端技术栈)
- [后端架构](./02_技术路径.md#后端架构)
- [数据库设计](./04_数据库设计.md)

### 核心功能
- [Portfolio管理](./01_项目概览.md#1-portfolio-持仓管理)
- [Scanner扫描器](./01_项目概览.md#3-scanner-期权扫描器)
- [警告系统](./01_项目概览.md#警告系统)

### 算法和计算
- [LOQ评分算法](./03_核心算法.md#loq算法买方评分)
- [IV期限结构](./03_核心算法.md#iv期限结构分析)
- [P&L计算](./03_核心算法.md#pl计算算法)

### API和集成
- [期权价格API](./05_API文档.md#期权价格api)
- [Supabase API](./05_API文档.md#supabase-rest-api)
- [错误处理](./05_API文档.md#错误处理)

### 使用指南
- [日常交易流程](./06_用户工作流.md#日常交易流程)
- [Scanner使用](./06_用户工作流.md#scanner使用指南)
- [风险管理](./06_用户工作流.md#风险管理)
- [最佳实践](./06_用户工作流.md#最佳实践)

---

## 💡 常见问题

### Q: 如何开始使用Trading Journal？
**A**: 阅读 [用户工作流](./06_用户工作流.md) 文档，从"日常交易流程"开始。

### Q: Scanner的评分是如何计算的？
**A**: 详见 [核心算法 - LOQ算法](./03_核心算法.md#loq算法买方评分)。

### Q: 如何设置止损条件？
**A**: 参考 [用户工作流 - 风险管理](./06_用户工作流.md#风险管理)。

### Q: API调用失败怎么办？
**A**: 查看 [API文档 - 错误处理](./05_API文档.md#错误处理)。

### Q: 数据库表结构是什么？
**A**: 详见 [数据库设计 - 表结构设计](./04_数据库设计.md#表结构设计)。

---

## 🔄 文档更新日志

### 2026-02-06 (v2.2 Update)
- ✅ **VRP Optimization**: 整合 IV/RV Ratio (Volatility Risk Premium)，显著增强评分算法在不同波动率环境下的筛选精度。
- ✅ **Performance Overhaul**: 引入 `/api/batch-option-price` 接口，解决 N+1 调用瓶颈，Portfolio 加载速度提升 ~80%。
- ✅ **UI/UX Modernization**: 重构 `PositionCard` 为 Glassmorphism 设计，引入 Health Bar 视觉化分值，大幅提升操作体验。
- ✅ **Liquidity Guard**: 增加 Deal Breaker 硬约束，自动过滤买卖价差率 > 15% 的劣质合约。
- ✅ **Algorithm Refactoring**: 统一 `Portfolio` 与 `Scanner` 的底层计算逻辑，消除评分偏差。

### 2026-02-06 (Credit/Spread Patch)
- ✅ **Credit Spread Accounting**: 修复信用价差核算，采用 Cost to Close (Short - Long) 逻辑，修正 P&L 计算。
- ✅ **Spread Scoring Optimization**: 将价差评分算法集成至 `scoring.ts`，实现 Portfolio 与 Recommender 评分 100% 映射一致。
- ✅ **Stability & Persistence**: 优化价格刷新逻辑，增加本地 `liveData` 缓存，修复数据刷新时的抖动和 disappearing 问题。
- ✅ **API Polish**: 更新 CBOE 接口头信息，修复 403 错误，标准化 `underlyingPrice` 字段。
- ✅ **Bug Fixes**: 解决评分 NaN 问题，优化 Tooltip 全局展示性能。

### 2026-02-05 (OSS v2.1)
- ✅ 优化评分权重 (OSS v2.1)
- ✅ 增加 Delta Bonus 线性插值
- ✅ 增加 Theta Pain Capsule 惩罚算法

### 未来计划
- [ ] 添加视频教程
- [ ] 添加交互式示例
- [ ] 添加故障排除指南
- [ ] 添加性能优化指南

---

## 📞 联系方式

**问题反馈**: GitHub Issues
**功能建议**: GitHub Discussions
**紧急联系**: [待补充]

---

## 📄 许可证

本项目文档采用 [MIT License](../LICENSE)

---

*文档维护者: Trading Journal Team*
*最后更新: 2026年2月6日*
